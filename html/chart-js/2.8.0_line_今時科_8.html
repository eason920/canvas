<!doctype html>
<html lang='ja'>

<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width: device-width, initial-scale= 1, user-scalable= no'>
  <title>2.8.0_line_今時科_8hr</title>
  <style>
    .box{
      width: 800px;
      height: 450px;
      /* transform: scale(.25); */
      transform-origin: 0% 0%;
      position: relative;
    }
    .box1, .box2, .box3{
      position: absolute;
      width: 100%;
      opacity: .07;
    }
    .box1{
      height: 20%;
      background: #f00;
    }
    .box2{
      height: 40%;
      background: #0f0;
      top: 20%
    }
    .box3{
      height: 40%;
      background: #00f;
      bottom: 0;
    }
    #w1 {
      /* width: 900px; */
      height: 100%!important;
      position: relative;
      z-index: 1
    }
  </style>
  <script src='js/Chart-2.8.0.min.js'></script>
  <script>
    const labels = [];
    const m = [0, 15, 30, 45];
    // const m = [0, 12, 24, 36, 48]
    // const m = [0, 10, 20, 30, 40, 50]
    for( i=0;i<24;i++ ){
      m.forEach(function(m){
        if(String(i).length < 2){ i = '0' + i};
        if(String(m).length < 2){ m = '0' + m};
        labels.push( i + ':' + m );
      });
    };
    // labels.push('24:00');
    // labels.splice(0,1)
    console.log(labels, labels.length);
    function displayLineChart() {
      var ctx = document.getElementById('w1');
      var w1 = new Chart(ctx, {
        type: 'line',
        data: {
          labels,
          datasets: [{
            label: 'line 1',
            // data: [
            //   0,0,0,0,0,0,0,0,0,0,0,0,
            //   0,0,0,0,0,0,0,0,0,0,0,0,
            //   51, 35, 32, 45, 37, 30, 51, 35
            // ],
            data: [
              0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
              31, 35, 32, 45, 37, 30, 31, 35, 32, 30, 31, 35, 32,
              45, 37, 30, 31, 35, 32, 45, 55, 30, 30, 31, 35, 32,
              // 40, 37, 33, 35, 35, 35, 47, 35
            ],
            // backgroundColor: 'rgba(54, 162, 235, .8)',
            // borderColor: 'rgba(0,0,0, 1)',
            backgroundColor: 'rgba(54, 162, 235, 0.2)',
            borderColor: 'rgba(54, 162, 235, 1)',
            borderWidth: 1
          }]
        },
        options: {
					scales: {
            yAxes: [{
              ticks: {
                stepSize: 10,
                // steps : 5,
                // stepValue : 5,
                // max : 50,
                min: 0
              }
            }],
            xAxes: [{
              ticks: {
                // stepSize: 8,
                maxTicksLimit: 6.1 // 0.1用以去除抓到非整點的時間
              }
            }]
          },
          legend: { // AREA : 上方導引色塊
            display: false
          },
          tooltips: { // AREA : 在點上 mouseover 出的報告小視窗
            // enabled: false, // 是否要運作
            caretPadding: 10, // 與 point 的距離
            displayColors: false, // 小色塊顯示
          }
        }
      });
    }

    // Chart.plugins.register({
    //   afterDatasetsDraw: function(chartInstance, easing) {
    //     // To only draw at the end of animation, check for easing === 1
    //     var ctx = chartInstance.chart.ctx;
    //     chartInstance.data.datasets.forEach(function(dataset, i) {
    //       var meta = chartInstance.getDatasetMeta(i);
    //       if (!meta.hidden ) {
    //         meta.data.forEach(function(element, index) {
    //           // Draw the text in black, with the specified font
    //           ctx.fillStyle = '#000';
    //           var fontSize = 12;
    //           var fontStyle = 'normal';
    //           var fontFamily = 'Helvetica Neue';
    //           ctx.font = Chart.helpers.fontString(fontSize, fontStyle, fontFamily);
    //           // Just naively convert to string for now
    //           var dataString = dataset.data[index].toString();
    //           // Make sure alignment settings are correct
    //           ctx.textAlign = 'center';
    //           ctx.textBaseline = 'middle';
    //           var x = 20;
    //           var y = 5
    //           var position = element.tooltipPosition();
    //           if( dataset.data[index].toString() != 0 ){
    //             ctx.fillText(dataString + '分', position.x - x, position.y - y);
    //           }
    //         });
    //       }
    //     });
    //   }
    // });
  </script>
</head>

<body onload='displayLineChart();'>
  <div class='box'>
    <!-- <div class="box1"></div>
    <div class="box2"></div>
    <div class="box3"></div> -->
    <canvas id='w1' height='450' width='800'></canvas>
  </div>
</body>

</html>